(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{173:function(t,e,n){Promise.resolve().then(n.bind(n,5917))},5917:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var r=n(7437),i=n(2265),s=n(4977);class l{constructor(t=0,e=10){this.skip=t,this.take=e}}var c=n(819),o=n(7010),u=n(9594),a=t=>{let{id:e,imgUrl:n,name:l,price:a}=t,d=(0,i.useContext)(c.hy),h=(0,i.useContext)(c.Tk);a=Math.ceil(100*a)/100;let[p,f]=(0,u.T)(a,".");return(0,r.jsxs)("div",{className:"bg-base-100 rounded-xl p-1 pb-4 space-y-2 flex flex-col justify-between shadow-md",children:[(0,r.jsx)("div",{className:"flex rounded-t-xl h-[150px] m-0 overflow-clip justify-center",children:(0,r.jsx)("img",{className:"rounded-t-xl self-center w-full h-full object-cover",src:n})}),(0,r.jsx)("span",{title:l,className:"px-2 font-bold min-h-[40px] line-clamp-3",children:l}),(0,r.jsxs)("div",{className:"flex pl-4 pr-2",children:[(0,r.jsxs)("span",{className:"w-4/5 text-rose-600 font-medium self-center text-lg",children:[p,""!=f&&",",(0,r.jsx)("span",{className:"align-super text-[12px]",children:f})," Lei"]}),(0,r.jsx)("span",{onClick:t=>{let n;null==(n=d.find(t=>t.id==e))?s.OA([e]).then(t=>{if(1!=t.length)return;let e=t[0];s.Wf([...d,new o.Z(e.id,e.title,e.price,e.thumbnailUrl,1)]).then(t=>h&&h(t))}):(n.count+=1,s.Wf([...d]).then(t=>h&&h(t)))},className:"w-1/5 cursor-pointer text-white p-1 font-bold bg-accent inline-block text-center rounded-xl",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})})})]})]})},d=()=>{let[t,e]=(0,i.useState)(new l(0,20)),[n,c]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(0,s.Xp)(t).then(t=>c(t))},[t]),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:null==n?void 0:n.map((t,e)=>(0,r.jsx)(a,{id:t.id,imgUrl:t.thumbnailUrl,price:t.price,name:t.title},t.id))})}},819:function(t,e,n){"use strict";n.d(e,{Tk:function(){return c},hy:function(){return l}});var r=n(7437),i=n(4977),s=n(2265);let l=(0,s.createContext)([]),c=(0,s.createContext)(null);e.ZP=t=>{let{children:e}=t,[n,o]=(0,s.useState)([]);return(0,s.useEffect)(()=>{(0,i.fk)().then(t=>o(t))},[]),(0,r.jsx)(l.Provider,{value:n,children:(0,r.jsx)(c.Provider,{value:o,children:e})})}},4977:function(t,e,n){"use strict";n.d(e,{fk:function(){return o},Xp:function(){return l},OA:function(){return c},Wf:function(){return u}});var r=n(2077),i=n(7010);class s{constructor(t,e){this.productId=0,this.count=0,this.productId=t,this.count=e}}function l(t){return fetch("https://dummyjson.com/products/category/smartphones?limit=".concat(t.take,"&skip=").concat(t.skip,"&select=title,price,thumbnail")).then(t=>t.ok?t.json():Promise.reject(t)).then(e=>e.products.slice(t.skip,t.skip+t.take).map(t=>new r.Z(t.id,t.title,t.price,t.thumbnail)))}function c(t){return Promise.all(t.map(t=>fetch("https://dummyjson.com/products/".concat(t,"?select=title,price,thumbnail")))).then(t=>(t.forEach(t=>{if(!t.ok)return Promise.reject(t)}),Promise.all(t.map(t=>t.json())))).then(e=>e.filter(e=>t.some(t=>t==e.id)).map(t=>new r.Z(t.id,t.title,t.price,t.thumbnail)))}function o(){if(null==window)return Promise.resolve([]);let t=localStorage.getItem("user_basket");if(null==t)return Promise.resolve([]);let e=JSON.parse(t);return c(e.map(t=>t.productId)).then(t=>Promise.resolve(t.map(t=>{let n=e.find(e=>e.productId==t.id);return new i.Z(t.id,t.title,t.price,t.thumbnailUrl,null==n?void 0:n.count)})))}function u(t){return localStorage.setItem("user_basket",JSON.stringify(t.map(t=>new s(t.id,t.count)))),o()}},7010:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(2077);class i extends r.Z{constructor(t,e,n,r="",i=1){super(t,e,n,r),this.count=1,this.count=i}}},2077:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});class r{constructor(t,e,n,r=""){this.id=-1,this.title="",this.price=Number.MAX_SAFE_INTEGER,this.thumbnailUrl="",this.id=t,this.title=e,this.price=n,this.thumbnailUrl=r}}},9594:function(t,e,n){"use strict";function r(t,e){let n=Math.trunc(t),r=Math.round(t%1*100);{let t=n.toString().split("");for(let n=t.length-3;n>0;n-=3)t.splice(n,0,e);n=t.join("")}return[n,r=0===r?"":r.toString().padStart(2,"0")]}n.d(e,{T:function(){return r}})}},function(t){t.O(0,[971,69,744],function(){return t(t.s=173)}),_N_E=t.O()}]);