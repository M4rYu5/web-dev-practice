(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{173:function(t,e,n){Promise.resolve().then(n.bind(n,2436))},2436:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var r=n(7437),i=n(2265),s=n(2601);class l{constructor(t=0,e=10){this.skip=t,this.take=e}}var o=n(4906),c=n(6678),u=n(4195),a=t=>{let{id:e,imgUrl:n,name:l,price:a}=t,d=(0,i.useContext)(o.hy),f=(0,i.useContext)(o.Tk);a=Math.ceil(100*a)/100;let[h,p]=(0,u.T)(a,".");return(0,r.jsxs)("div",{className:"bg-base-100 rounded-xl p-1 pb-4 space-y-2 flex flex-col justify-between shadow-md",children:[(0,r.jsx)("div",{className:"flex rounded-t-xl h-[150px] m-0 overflow-clip justify-center",children:(0,r.jsx)("img",{className:"rounded-t-xl self-center w-full h-full object-cover",src:n})}),(0,r.jsx)("span",{title:l,className:"px-2 font-bold min-h-[40px] line-clamp-3",children:l}),(0,r.jsxs)("div",{className:"flex pl-4 pr-2",children:[(0,r.jsxs)("span",{className:"w-4/5 text-rose-600 font-medium self-center text-lg",children:[h,""!=p&&",",(0,r.jsx)("span",{className:"align-super text-[12px]",children:p})," Lei"]}),(0,r.jsx)("span",{onClick:t=>{let n;null==(n=d.find(t=>t.id==e))?s.OA([e]).then(t=>{if(1!=t.length)return;let e=t[0];s.Wf([...d,new c.Z(e.id,e.title,e.price,e.thumbnailUrl,1)]).then(t=>f&&f(t))}):(n.count+=1,s.Wf([...d]).then(t=>f&&f(t)))},className:"w-1/5 cursor-pointer text-white p-1 font-bold bg-accent inline-block text-center rounded-xl",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})})})]})]})},d=()=>{let[t,e]=(0,i.useState)(new l(0,20)),[n,o]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(0,s.Xp)(t).then(t=>o(t))},[t]),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:null==n?void 0:n.map((t,e)=>(0,r.jsx)(a,{id:t.id,imgUrl:t.thumbnailUrl,price:t.price,name:t.title},t.id))})}},4906:function(t,e,n){"use strict";n.d(e,{Tk:function(){return o},hy:function(){return l}});var r=n(7437),i=n(2601),s=n(2265);let l=(0,s.createContext)([]),o=(0,s.createContext)(null);e.ZP=t=>{let{children:e}=t,[n,c]=(0,s.useState)([]);return(0,s.useEffect)(()=>{(0,i.fk)().then(t=>c(t))},[]),(0,r.jsx)(l.Provider,{value:n,children:(0,r.jsx)(o.Provider,{value:c,children:e})})}},2601:function(t,e,n){"use strict";n.d(e,{fk:function(){return c},Xp:function(){return l},OA:function(){return o},Wf:function(){return u}});var r=n(7463),i=n(6678);class s{constructor(t,e){this.productId=0,this.count=0,this.productId=t,this.count=e}}function l(t){return fetch("./products/products.json").then(t=>t.json()).then(e=>e.slice(t.skip,t.skip+t.take).map(t=>new r.Z(t.id,t.title,t.price,t.thumbnail)))}function o(t){return fetch("./products/products.json").then(t=>t.json()).then(e=>e.filter(e=>t.some(t=>t==e.id)).map(t=>new r.Z(t.id,t.title,t.price,t.thumbnail)))}function c(){if(null==window)return Promise.resolve([]);let t=localStorage.getItem("user_basket");if(null==t)return Promise.resolve([]);let e=JSON.parse(t);return o(e.map(t=>t.productId)).then(t=>Promise.resolve(t.map(t=>{let n=e.find(e=>e.productId==t.id);return new i.Z(t.id,t.title,t.price,t.thumbnailUrl,null==n?void 0:n.count)})))}function u(t){return localStorage.setItem("user_basket",JSON.stringify(t.map(t=>new s(t.id,t.count)))),c()}},6678:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(7463);class i extends r.Z{constructor(t,e,n,r="",i=1){super(t,e,n,r),this.count=1,this.count=i}}},7463:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});class r{constructor(t,e,n,r=""){this.id=-1,this.title="",this.price=Number.MAX_SAFE_INTEGER,this.thumbnailUrl="",this.id=t,this.title=e,this.price=n,this.thumbnailUrl=r}}},4195:function(t,e,n){"use strict";function r(t,e){let n=Math.trunc(t),r=Math.round(t%1*100);{let t=n.toString().split("");for(let n=t.length-3;n>0;n-=3)t.splice(n,0,e);n=t.join("")}return[n,r=0===r?"":r.toString().padStart(2,"0")]}n.d(e,{T:function(){return r}})},622:function(t,e,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),i=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,c={},u=null,a=null;for(r in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(a=e.ref),e)s.call(e,r)&&!o.hasOwnProperty(r)&&(c[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===c[r]&&(c[r]=e[r]);return{$$typeof:i,type:t,key:u,ref:a,props:c,_owner:l.current}}e.jsx=c,e.jsxs=c},7437:function(t,e,n){"use strict";t.exports=n(622)}},function(t){t.O(0,[971,596,744],function(){return t(t.s=173)}),_N_E=t.O()}]);